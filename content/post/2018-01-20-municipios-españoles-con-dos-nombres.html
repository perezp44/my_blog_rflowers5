---
title: Municipios espa√±oles con dos nombres
author: Pedro J. P√©rez
date: '2018-01-20'
slug: municipios-espa√±oles-con-dos-nombres
categories: [municipios]
tags: [data munging]
description: 'Inspirado por un post de Suzan Baert me ha dado por ver cuantos municipios espa√±oles tienen dos nombres oficiales. Avanzo el resultado: en Espa√±a representan el 1,46%, mientras que en B√©lgica son un 16%. Nos ganan!! Los mapas los dejo para el siguiente post.'
#banner:   'banners/nest_pas_unconf.png'
#images:     #['img/nest_pas_unconf.png']
#menu: ''
---

<script src="2018-01-20-municipios-espa√±oles-con-dos-nombres_files/htmlwidgets/htmlwidgets.js"></script>
<script src="2018-01-20-municipios-espa√±oles-con-dos-nombres_files/jquery/jquery.min.js"></script>
<script src="2018-01-20-municipios-espa√±oles-con-dos-nombres_files/datatables-binding/datatables.js"></script>
<link href="2018-01-20-municipios-espa√±oles-con-dos-nombres_files/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="2018-01-20-municipios-espa√±oles-con-dos-nombres_files/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="2018-01-20-municipios-espa√±oles-con-dos-nombres_files/dt-core/js/jquery.dataTables.min.js"></script>
<link href="2018-01-20-municipios-espa√±oles-con-dos-nombres_files/dt-ext-scroller/css/scroller.dataTables.min.css" rel="stylesheet" />
<script src="2018-01-20-municipios-espa√±oles-con-dos-nombres_files/dt-ext-scroller/js/dataTables.scroller.min.js"></script>
<link href="2018-01-20-municipios-espa√±oles-con-dos-nombres_files/nouislider/jquery.nouislider.min.css" rel="stylesheet" />
<script src="2018-01-20-municipios-espa√±oles-con-dos-nombres_files/nouislider/jquery.nouislider.min.js"></script>
<link href="2018-01-20-municipios-espa√±oles-con-dos-nombres_files/selectize/selectize.bootstrap3.css" rel="stylesheet" />
<script src="2018-01-20-municipios-espa√±oles-con-dos-nombres_files/selectize/selectize.min.js"></script>


<p>Nuevo post. Voy a hacer un gr√°fico con los municipios espa√±oles que tienen dos nombres oficiales, por ejemplo: Alicante/Alacant.</p>
<p>Que ¬øpor qu√©? pues resulta que estaba tratando de recordar c√≥mo se hacen mapas en R y vi <a href="https://suzanbaert.netlify.com/2017/12/bilingualtowns">este post</a> de <a href="https://github.com/suzanbaert">Suzan Baert</a>. Suzan es belga y en B√©lgica hay muchas localidades con 2 nombres, por ejemplo Li√®ge/Luik en French y en Dutch respectivamente, y resulta que ‚Ä¶ , con sus palabras:</p>
<blockquote>
<p>Two week ago, I heard again a story from foreigners who got very confused, and I realized I have no idea how many towns/cities we have like this. Sounds like a perfect time to play around with <code>tmap</code> and <code>leaflet</code>!</p>
</blockquote>
<p>A mi me pasa lo mismo, no s√© cuantos municipios espa√±oles tienen 2 nombres y cuando vi el post justamente estaba jugando con los ficheros del INE, as√≠ que perfect time! A√∫n no me he le√≠do su post, pero creo que la √∫nica diferencia es que como mi objetivo es aprender sobre mapas voy a intentar hacerlo con el package <code>sf</code>. Vamos all√°!!</p>
<p>Lo primero cargar las librer√≠as</p>
<pre class="r"><code>#devtools::install_github(&quot;perezp44/mypkgDataforblog&quot;)
library(mypkgDataforblog) #- personal pkg
library(stringr)
library(tidyverse)
library(kableExtra)</code></pre>
<p><br></p>
<div id="los-datos" class="section level3">
<h3>Los datos</h3>
<p>Los datos con los nombres oficiales de los municipios son del INE. Los baj√© hace unos 3-4 meses y son datos a 1 de enero de 2016, ahora hay un nuevo fichero (es un fichero <code>.xlsx</code>) pero al intentar abrirlo (tanto desde R como desde Excel) me da errores, as√≠ que sigo con el fichero antiguo, no es un post tan serio!! , pero si quieres probar a descargarlo tu, puedes hacerlo as√≠:</p>
<pre class="r"><code>url &lt;- &quot;http://www.ine.es/daco/daco42/codmun/codmun17/17codmun.xlsx&quot;
download.file(url, destfile = &quot;./datos/cod_2_municipios.xlsx&quot;)
df  &lt;- read_excel(&quot;./datos/cod_2_municipios.xlsx&quot;)</code></pre>
<p>Los datos los cargo desde el package <a href="https://github.com/perezp44/mypkgDataforblog">mypkgDataforblog</a>. Es un paquete creado por mi precisamente para facilitarme la utilizaci√≥n de datos en este blog. Sencillamente contiene un conjunto de datos y as√≠ los utilizo en el blog m√°s f√°cilmente. Por ejemplo:</p>
<pre class="r"><code>df &lt;- cod_INE_muni_pjp</code></pre>
<p>En el fichero <code>cod_INE_muni_pjp</code> hay <strong>8125 municipios</strong>. Los municipios con dos nombres oficiales se pueden identificar por que los 2 nombres aparecen separados por el car√°cter <code>/</code>, por ejemplo: Alicante/Alacant.</p>
</div>
<div id="manipulacion-de-datos" class="section level3">
<h3>Manipulaci√≥n de datos</h3>
<p>En el fichero aparecen los dos nombres juntos en una misma columna (<code>NombreMuni</code>) as√≠ que hay que separarlos:</p>
<pre class="r"><code>df &lt;- df %&gt;% mutate(NOMBRE_tmp = NombreMuni) %&gt;% 
  separate(NOMBRE_tmp, into = c(&quot;name_1&quot;, &quot;name_2&quot;), sep = &quot;/&quot;)  %&gt;% 
  mutate(yes_2_names = if_else(is.na(name_2), 0.0, 1.0)) %&gt;% 
  select(INECodMuni, NombreMuni, yes_2_names, name_1, name_2, NombreCCAA, everything())</code></pre>
<p>Ok, ya est√°. Solo queda contar cuantos municipios tienen dos nombres y en que provincia/CC.AA. est√°n. Primero por CC.AA. Vamos a ello:</p>
<pre class="r"><code>aa &lt;- df %&gt;% group_by(NombreCCAA) %&gt;% 
  summarise(Municipios = n(), Muni_2_nombres = sum(yes_2_names), percent = Muni_2_nombres/Municipios) %&gt;% 
  filter(Muni_2_nombres != 0) %&gt;% 
  arrange(desc(percent))</code></pre>
<p>Hagamos el cuadro:</p>
<pre class="r"><code>library(knitr)
aa %&gt;% kable(&quot;html&quot;, digits = 2, caption = &quot;Cuadro 1: Municipios espa√±oles con dos nombres oficiales (por CC.AA.)&quot;) %&gt;% kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;))</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-7">Table 1: </span>Cuadro 1: Municipios espa√±oles con dos nombres oficiales (por CC.AA.)
</caption>
<thead>
<tr>
<th style="text-align:left;">
NombreCCAA
</th>
<th style="text-align:right;">
Municipios
</th>
<th style="text-align:right;">
Muni_2_nombres
</th>
<th style="text-align:right;">
percent
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Navarra, Comunidad Foral de
</td>
<td style="text-align:right;">
272
</td>
<td style="text-align:right;">
64
</td>
<td style="text-align:right;">
0.24
</td>
</tr>
<tr>
<td style="text-align:left;">
Pa√≠s Vasco
</td>
<td style="text-align:right;">
251
</td>
<td style="text-align:right;">
22
</td>
<td style="text-align:right;">
0.09
</td>
</tr>
<tr>
<td style="text-align:left;">
Comunitat Valenciana
</td>
<td style="text-align:right;">
542
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
0.06
</td>
</tr>
</tbody>
</table>
<p>En total hay 119 municipios con dos nombres. Como en el listado que manejo hay 8.125 municipios esto supone <strong>tan s√≥lo el 1,46%, digo tan s√≥lo porque en B√©lgica son un 16%</strong>. La mayor√≠a de ellos est√°n en Navarra, concretamente 64. Con mucha diferencia Navarra es, con un 23,5%, la Comunidad con mayor porcentaje de municipios con 2 nombres.</p>
<p>Hag√°moslo por provincias:</p>
<pre class="r"><code>aa &lt;- df %&gt;% group_by(NombreProv) %&gt;% 
  summarise(Municipios = n(), Muni_2_nombres = sum(yes_2_names), percent = Muni_2_nombres/Municipios) %&gt;% 
  filter(Muni_2_nombres != 0) %&gt;% 
  arrange(desc(percent))

#- tabla simple
aa %&gt;% kable(&quot;html&quot;, digits = 2, caption = &quot;Cuadro 2: Municipios espa√±oles con dos nombres oficiales (por provincia)&quot;) %&gt;%
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;))</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-8">Table 2: </span>Cuadro 2: Municipios espa√±oles con dos nombres oficiales (por provincia)
</caption>
<thead>
<tr>
<th style="text-align:left;">
NombreProv
</th>
<th style="text-align:right;">
Municipios
</th>
<th style="text-align:right;">
Muni_2_nombres
</th>
<th style="text-align:right;">
percent
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Araba/√Ålava
</td>
<td style="text-align:right;">
51
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
0.35
</td>
</tr>
<tr>
<td style="text-align:left;">
Navarra
</td>
<td style="text-align:right;">
272
</td>
<td style="text-align:right;">
64
</td>
<td style="text-align:right;">
0.24
</td>
</tr>
<tr>
<td style="text-align:left;">
Alicante/Alacant
</td>
<td style="text-align:right;">
141
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;">
Castell√≥n/Castell√≥
</td>
<td style="text-align:right;">
135
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;">
Gipuzkoa
</td>
<td style="text-align:right;">
88
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.02
</td>
</tr>
<tr>
<td style="text-align:left;">
Valencia/Val√®ncia
</td>
<td style="text-align:right;">
266
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0.02
</td>
</tr>
<tr>
<td style="text-align:left;">
Bizkaia
</td>
<td style="text-align:right;">
112
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0.02
</td>
</tr>
</tbody>
</table>
<p>La verdad es que por provincias los resultados <em>‚Äúcambian‚Äù</em>, incluso hay cuatro provincias con 2 nombres oficiales. Araba/√Ålava es la provincia con mayor porcentaje (35%) de municipios con dos nombres oficiales: 18 municipios de 51. Despu√©s har√© un gr√°fico.</p>
<p><br></p>
<p>Para el que tenga curiosidad en ver exactamente que municipios son los que tienen dos nombres:</p>
<p><strong>Cuadro 3:</strong> Municipios con dos nombres oficiales</p>
<pre class="r"><code>library(DT)
aa &lt;- df %&gt;% filter(yes_2_names != 0) %&gt;% 
  select(NombreMuni, NombreProv, NombreCCAA)

DT_1 &lt;- datatable(aa, extensions = &#39;Scroller&#39;, options = list( pageLength = 10, deferRender = TRUE,scrollY = 400,scroller = TRUE), rownames = F, filter = &quot;top&quot; )</code></pre>
<p>No se porque pero no se muestra la datatable</p>
<pre class="r"><code>DT_1</code></pre>
<div id="htmlwidget-1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Scroller"],"data":[["Ayala/Aiara","Ba√±os de Ebro/Ma√±ueta","Campezo/Kanpezu","Elburgo/Burgelu","Elvillar/Bilar","Erriberagoitia/Ribera Alta","Harana/Valle de Arana","Iru√±a Oka/Iru√±a de Oca","Labastida/Bastida","Lanciego/Lantziego","Laudio/Llodio","Moreda de √Ålava/Moreda Araba","Ribera Baja/Erribera Beitia","Salvatierra/Agurain","San Mill√°n/Donemiliaga","Valdegov√≠a/Gaubea","Villabuena de √Ålava/Eskuernaga","Y√©cora/Iekora","Alcoy/Alcoi","Alicante/Alacant","Benitachell/Poble Nou de Benitatxell, el","Campo de Mirra/Camp de Mirra, el","Elche/Elx","Fond√≥ de les Neus, el/Hond√≥n de las Nieves","J√°vea/X√†bia","Jijona/Xixona","Lorcha/Orxa, l'","Mon√≥var/Mon√≤ver","Pin√≥s, el/Pinoso","San Vicente del Raspeig/Sant Vicent del Raspeig","Torremanzanas/Torre de les Ma√ßanes, la","Villajoyosa/Vila Joiosa, la","Almazora/Almassora","Alqueries, les/Alquer√≠as del Ni√±o Perdido","Benicasim/Benic√†ssim","Borriana/Burriana","Castell√≥n de la Plana/Castell√≥ de la Plana","Chilches/Xilxes","Chodos/Xodos","Oropesa del Mar/Orpesa","Pen√≠scola/Pe√±√≠scola","Sant Jordi/San Jorge","Sueras/Suera","Useras/Useres, les","Villafranca del Cid/Vilafranca","Arrasate/Mondrag√≥n","Donostia/San Sebasti√°n","Ab√°rzuza/Abartzuza","Abaurregaina/Abaurrea Alta","Abaurrepea/Abaurrea Baja","Aibar/Oibar","All√≠n/Allin","Altsasu/Alsasua","Anc√≠n/Antzin","Anso√°in/Antsoain","Aoiz/Agoitz","Aranarache/Aranaratxe","Arce/Artzi","Atez/Atetz","Auritz/Burguete","Ayegui/Aiegi","Berrioplano/Berriobeiti","Burgui/Burgi","Burlada/Burlata","Cendea de Olza/Oltza Zendea","Cirauqui/Zirauki","Ciriza/Ziritza","Doneztebe/Santesteban","En√©riz/Eneritz","Esparza de Salazar/Espartza Zaraitzu","Ezc√°roz/Ezkaroze","Gallipienzo/Galipentzu","Gallu√©s/Galoze","G√ºesa/Gorza","Gues√°laz/Gesalatz","Hiriberri/Villanueva de Aezkoa","Huarte/Uharte","Isaba/Izaba","Iza/Itza","Izalzu/Itzaltzu","Leache/Leatxe","Leoz/Leotz","L√≥nguida/Longida","Luzaide/Valcarlos","Monreal/Elo","Navascu√©s/Nabaskoze","No√°in (Valle de Elorz)/Noain (Elortzibar)","Ochagav√≠a/Otsagabia","Olazti/Olazagut√≠a","Olite/Erriberri","Ol√≥riz/Oloritz","Oronz/Orontze","Oroz-Betelu/Orotz-Betelu","Orreaga/Roncesvalles","Pamplona/Iru√±a","Peralta/Azkoien","Puente la Reina/Gares","Roncal/Erronkari","Salinas de Oro/Jaitz","Sang√ºesa/Zangoza","Sarri√©s/Sartze","Unzu√©/Untzue","Urdazubi/Urdax","Urzainqui/Urzainki","Uzt√°rroz/Uztarroze","Valle de Eg√º√©s/Eguesibar","Valle de Yerri/Deierri","Vid√°ngoz/Bidankoze","Villava/Atarrabia","Zabalza/Zabaltza","Zizur Mayor/Zizur Nagusia","Mogente/Moixent","Montitxelvo/Montichelvo","Montroi/Montroy","Novel√©/Novetl√®","Sagunto/Sagunt","Vilallonga/Villalonga","Karrantza Harana/Valle de Carranza","Urdu√±a/Ordu√±a"],["Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Alicante/Alacant","Alicante/Alacant","Alicante/Alacant","Alicante/Alacant","Alicante/Alacant","Alicante/Alacant","Alicante/Alacant","Alicante/Alacant","Alicante/Alacant","Alicante/Alacant","Alicante/Alacant","Alicante/Alacant","Alicante/Alacant","Alicante/Alacant","Castell√≥n/Castell√≥","Castell√≥n/Castell√≥","Castell√≥n/Castell√≥","Castell√≥n/Castell√≥","Castell√≥n/Castell√≥","Castell√≥n/Castell√≥","Castell√≥n/Castell√≥","Castell√≥n/Castell√≥","Castell√≥n/Castell√≥","Castell√≥n/Castell√≥","Castell√≥n/Castell√≥","Castell√≥n/Castell√≥","Castell√≥n/Castell√≥","Gipuzkoa","Gipuzkoa","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Valencia/Val√®ncia","Valencia/Val√®ncia","Valencia/Val√®ncia","Valencia/Val√®ncia","Valencia/Val√®ncia","Valencia/Val√®ncia","Bizkaia","Bizkaia"],["Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Pa√≠s Vasco","Pa√≠s Vasco","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Comunitat Valenciana","Pa√≠s Vasco","Pa√≠s Vasco"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NombreMuni<\/th>\n      <th>NombreProv<\/th>\n      <th>NombreCCAA<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"deferRender":true,"scrollY":400,"scroller":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row"}},"evals":[],"jsHooks":[]}</script>
<p><br></p>
</div>
<div id="ya-deberia-estar-pero" class="section level3">
<h3>Ya deber√≠a estar PERO ‚Ä¶</h3>
<p>Bueno, pues ya deber√≠a estar, faltar√≠an los mapas, <strong>PERO</strong> ‚Ä¶ las cosas no son tan sencillas en Espa√±a. Hay un peque√±o l√≠o!!! Resulta que lo que he hecho arriba es correcto: en Espa√±a hay 119 municipios con 2 nombres oficiales, pero resulta que tambi√©n hay municipios que aunque s√≥lo tienen un nombre oficial, este √∫nico nombre oficial incluye el nombre del municipio en 2 idiomas. Se entiende mejor con un ejemplo: el municipio con c√≥digo <code>07032</code> tiene nombre oficial <code>Ma√≥-Mah√≥n</code>. Seg√∫n la Wikipedia en castellano:</p>
<blockquote>
<p>Mah√≥n (en catal√°n, Ma√≥, oficialmente desde 2012, Ma√≥-Mah√≥n, la pronunciaci√≥n local es M√≥) es una ciudad situada en el este de la isla de Menorca (Baleares, Espa√±a).</p>
</blockquote>
<p>Seg√∫n la Viquipedia, o <a href="https://ca.wikipedia.org/wiki/Portada">wikipedia en catal√°n</a>:</p>
<blockquote>
<p>Ma√≥ (oficialment Ma√≥-Mah√≥n) √©s un municipi i ciutat de l‚Äôilla de Menorca, situat a l‚Äôest de l‚Äôilla i actual seu del Consell Insular de Menorca.</p>
</blockquote>
<p>Bien, Ma√≥-Mah√≥n, da la casualidad de que es el √∫nico municipio de Baleares con 2 nombres oficiales, bueno, con un √∫nico nombre oficial pero que incluye el nombre en catal√°n y castellano.</p>
<p>Bueno, nos/me toca repetir el an√°lisis, ahora incorporando los municipios como <code>Ma√≥-Mah√≥n</code></p>
<p><br></p>
</div>
<div id="repetimos-para-incluir-a-los-municipios-como-mao-mahon" class="section level3">
<h3>Repetimos para incluir a los municipios como <code>Ma√≥-Mah√≥n</code></h3>
<p>Pues lo dicho a incorporar los municipios con un nombre oficial, pero que ese nombre tenga el nombre en dos lenguas:</p>
<pre class="r"><code>df &lt;- cod_INE_muni_pjp
df_2 &lt;- df %&gt;% mutate(NOMBRE_tmp = NombreMuni) %&gt;% 
   filter(str_detect(NombreMuni, &quot;-&quot;))</code></pre>
<p>Bueno, hay 113 pueblos que en su nombre oficial aparece el car√°cter <code>-</code>; PERO no es tan f√°cil porque resulta que hay municipios que tienen un nombre compuesto; por ejemplo: Casas-Iba√±ez o V√©lez-Rubio. Estos, obviamente, hay que quitarlos. El problema es que hay que quitarlos usando la inspecci√≥n visual/juicio experto, eso s√≠, ayud√°ndome de R.</p>
<p>A mi buen entender s√≥lo hay municipios con ‚Äú2 nombres‚Äù en las siguientes comunidades: Navarra, Pa√≠s Vasco, Comunitat Valenciana y un √∫nico municipio en Baleares (Ma√≥-Mah√≥n), en el resto de CC.AA. en los que parece <code>-</code> en el nombre de un municipio es porque ese municipio tiene un nombre compuesto.</p>
</div>
<div id="pero-aun-se-complican-un-poco-mas-las-cosas" class="section level3">
<h3>Pero a√∫n se complican un poco m√°s las cosas:</h3>
<p>Pero a√∫n se complican un poco m√°s las cosas, porque:</p>
<ul>
<li><p>En el caso de <strong>Navarra</strong> y <strong>Pa√≠s Vasco</strong> considero que los municipios en los que parece <code>-</code> es porque s√≠ que tienen 2 nombres (para ser exactos un √∫nico nombre oficial, pero compuesto por el ‚Äúnombre‚Äù en 2 lenguas); en realidad es f√°cil que tambien haya algun municipio con nombre compuesto, pero como no se euskera pues lo dejo correr y considero que son ‚Äúnombres con doble nombre‚Äù. He mirado algunos de ellos en la Wikipedia y en esos casos estaba en lo cierto, pero no lo he hecho con todos <a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>. Disculpas!!</p></li>
<li><p>PERO, en la <strong>Comunitat Valenciana</strong>, los dos municipios en los que parece <code>-</code>, aparece porque tienen un nombre compuesto: Vila-real, Riba-roja de T√∫ria</p></li>
<li><p>Y ya para decirlo todo, hay un municipio en Navarra: <code>Oroz-Betelu/Orotz-Betelu</code> que como veis tiene dos nombres oficiales y cada nombre oficial es compuesto.</p></li>
</ul>
<p>No le doy m√°s vueltas, ya no me estoy divirtiendo!!, pero vamos a acabar la faena.</p>
<p>Vamos a filtrarlos:</p>
<pre class="r"><code>df &lt;- cod_INE_muni_pjp
#-----selecciono municipios con con &quot;/&quot; y/o &quot;-&quot; en Nombre Muni
df_2 &lt;- df %&gt;% mutate(NOMBRE_tmp = NombreMuni) %&gt;% 
       filter(str_detect(NombreMuni, &quot;(-|/)&quot;))   #- 231 pueblos 
#-----selecciono municipios con &quot;/&quot; y &quot;-&quot; en las CC.AA. oportunas
CCAA_in &lt;- c(&quot;Pa√≠s Vasco&quot;, &quot;Navarra, Comunidad Foral de&quot;, &quot;Comunitat Valenciana&quot;, &quot;Balears, Illes&quot;)
CCAA_in &lt;- c(&quot;16&quot;, &quot;15&quot;, &quot;10&quot;, &quot;04&quot;)
df_2 &lt;- df_2 %&gt;% filter(INECodCCAA %in% CCAA_in)  #- 151
#---- quito los municipios valencianos con nombre compuesto
df_2 &lt;- df_2 %&gt;% filter(!(INECodCCAA == &quot;10&quot; &amp; str_detect(NombreMuni, &quot;-&quot;)))  #- 149</code></pre>
<p>Creo que est√° todo correcto. Finalmente son 149 municipios con ‚Äú2 nombres‚Äù; antes eran 119. Veamos los nuevos resultados por CC.AA. y provincias.</p>
<pre class="r"><code>muni_in &lt;- as.vector(df_2$INECodMuni)
aa &lt;- df %&gt;% group_by(NombreCCAA) %&gt;% 
       mutate(yes_2_names = if_else(INECodMuni %in% muni_in, 1,0)) %&gt;% 
       summarise(Municipios = n(), Muni_2_nombres = sum(yes_2_names), percent = Muni_2_nombres/Municipios) %&gt;%        filter(Muni_2_nombres != 0) %&gt;% 
       arrange(desc(percent))

aa %&gt;% kable(&quot;html&quot;, digits = 2, caption = &quot;Cuadro 1a: Municipios espa√±oles con \&quot;dos nombres\&quot; oficiales (por CC.AA.)&quot;) %&gt;%
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;))</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-13">Table 3: </span>Cuadro 1a: Municipios espa√±oles con ‚Äúdos nombres‚Äù oficiales (por CC.AA.)
</caption>
<thead>
<tr>
<th style="text-align:left;">
NombreCCAA
</th>
<th style="text-align:right;">
Municipios
</th>
<th style="text-align:right;">
Muni_2_nombres
</th>
<th style="text-align:right;">
percent
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Navarra, Comunidad Foral de
</td>
<td style="text-align:right;">
272
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:right;">
0.26
</td>
</tr>
<tr>
<td style="text-align:left;">
Pa√≠s Vasco
</td>
<td style="text-align:right;">
251
</td>
<td style="text-align:right;">
45
</td>
<td style="text-align:right;">
0.18
</td>
</tr>
<tr>
<td style="text-align:left;">
Comunitat Valenciana
</td>
<td style="text-align:right;">
542
</td>
<td style="text-align:right;">
33
</td>
<td style="text-align:right;">
0.06
</td>
</tr>
<tr>
<td style="text-align:left;">
Balears, Illes
</td>
<td style="text-align:right;">
67
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.01
</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Comparando los cuadros 1 y 1a vemos que los resultados cambian ‚Äúun poco‚Äù. Lo m√°s evidente es que ahora aparece una cuarta comunidad aut√≥noma: Illes Balears (por Ma√≥-Mah√≥n). La Comunitat Valenciana se queda igual. En la Comunidad Foral de Navarra aparecen 6 municipios nuevos. Los cambios m√°s importantes se dan en Pa√≠s Vasco, donde se suman 23 municipios y el porcentaje sube del 8,7% al 17,9%.</p>
<p><br></p>
<div id="por-provincias" class="section level4">
<h4>Por provincias:</h4>
<pre class="r"><code>muni_in &lt;- df_2$INECodMuni
aa &lt;- df %&gt;% group_by(NombreProv) %&gt;% 
       mutate(yes_2_names = if_else(INECodMuni %in% muni_in, 1,0)) %&gt;% 
       summarise(Municipios = n(), Muni_2_nombres = sum(yes_2_names), percent = Muni_2_nombres/Municipios) %&gt;%        filter(Muni_2_nombres != 0) %&gt;% 
       arrange(desc(percent))

aa %&gt;% kable(&quot;html&quot;, digits = 2, caption = &quot;Cuadro 2a: Municipios espa√±oles con \&quot;dos nombres\&quot; oficiales (por provincias)&quot;) %&gt;%
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;))</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-14">Table 4: </span>Cuadro 2a: Municipios espa√±oles con ‚Äúdos nombres‚Äù oficiales (por provincias)
</caption>
<thead>
<tr>
<th style="text-align:left;">
NombreProv
</th>
<th style="text-align:right;">
Municipios
</th>
<th style="text-align:right;">
Muni_2_nombres
</th>
<th style="text-align:right;">
percent
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Araba/√Ålava
</td>
<td style="text-align:right;">
51
</td>
<td style="text-align:right;">
25
</td>
<td style="text-align:right;">
0.49
</td>
</tr>
<tr>
<td style="text-align:left;">
Navarra
</td>
<td style="text-align:right;">
272
</td>
<td style="text-align:right;">
70
</td>
<td style="text-align:right;">
0.26
</td>
</tr>
<tr>
<td style="text-align:left;">
Bizkaia
</td>
<td style="text-align:right;">
112
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
0.12
</td>
</tr>
<tr>
<td style="text-align:left;">
Alicante/Alacant
</td>
<td style="text-align:right;">
141
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;">
Castell√≥n/Castell√≥
</td>
<td style="text-align:right;">
135
</td>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
0.10
</td>
</tr>
<tr>
<td style="text-align:left;">
Gipuzkoa
</td>
<td style="text-align:right;">
88
</td>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
0.08
</td>
</tr>
<tr>
<td style="text-align:left;">
Valencia/Val√®ncia
</td>
<td style="text-align:right;">
266
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0.02
</td>
</tr>
<tr>
<td style="text-align:left;">
Balears, Illes
</td>
<td style="text-align:right;">
67
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.01
</td>
</tr>
</tbody>
</table>
<p>La provincia espa√±ola con mayor porcentaje de municipios con ‚Äú2 nombres‚Äù sigue siendo <code>Araba/√Ålava</code>, acerc√°ndose al 50%.</p>
<p><br></p>
<p>Para finalizar una tabla con los 31 nuevos municipios con 2 nombres que han aparecido con el nuevo criterio. Primero hay que filtrarlos:</p>
<pre class="r"><code>df &lt;- cod_INE_muni_pjp
#-----selecciono municipios con con  &quot;-&quot; en Nombre Muni
df_2 &lt;- df %&gt;% mutate(NOMBRE_tmp = NombreMuni) %&gt;% 
       filter(str_detect(NombreMuni, &quot;-&quot;))   #- 113 pueblos 
#-----selecciono municipios con &quot;-&quot; en las CC.AA. oportunas
CCAA_in &lt;- c(&quot;Pa√≠s Vasco&quot;, &quot;Navarra, Comunidad Foral de&quot;, &quot;Comunitat Valenciana&quot;, &quot;Balears, Illes&quot;)
CCAA_in &lt;- c(&quot;16&quot;, &quot;15&quot;, &quot;10&quot;, &quot;04&quot;)
df_2 &lt;- df_2 %&gt;% filter(INECodCCAA %in% CCAA_in)  #- 33
#---- quito los municipios valencianos con nombre compuesto
df_2 &lt;- df_2 %&gt;% filter(!(INECodCCAA == &quot;10&quot; &amp; str_detect(NombreMuni, &quot;-&quot;)))  #- 31</code></pre>
<p>La tabla:</p>
<pre class="r"><code>aa &lt;- df_2 %&gt;% select(NombreMuni, NombreProv, NombreCCAA)
datatable(aa, caption = &quot;Cuadro 3a: (nuevos) Municipios con \&quot;dos nombres oficiales\&quot;&quot;,extensions = &#39;Scroller&#39;, options = list( pageLength = 10, deferRender = TRUE,scrollY = 400,scroller = TRUE), rownames = F, filter = &quot;top&quot; )</code></pre>
<div id="htmlwidget-2" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"filter":"top","filterHTML":"<tr>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"character\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Scroller"],"caption":"<caption>Cuadro 3a: (nuevos) Municipios con \"dos nombres oficiales\"<\/caption>","data":[["Alegr√≠a-Dulantzi","Arraia-Maeztu","Arratzua-Ubarrundia","Iruraiz-Gauna","Oy√≥n-Oion","Pe√±acerrada-Urizaharra","Vitoria-Gasteiz","Ma√≥-Mah√≥n","Bidania-Goiatz","Ezkio-Itsaso","Lasarte-Oria","Leintz-Gatzaga","Soraluze-Placencia de las Armas","Beintza-Labaien","Biurrun-Olcoz","Estella-Lizarra","Lizo√°in-Arriasgoiti","Oroz-Betelu/Orotz-Betelu","Tiebas-Muruarte de Reta","Urroz-Villa","Abanto y Ci√©rvana-Abanto Zierbena","Amorebieta-Etxano","Gamiz-Fika","Gernika-Lumo","Markina-Xemein","Maruri-Jatabe","Munitibar-Arbatzegi Gerrikaitz","Trucios-Turtzioz","Ugao-Miraballes","Valle de Tr√°paga-Trapagaran","Ziortza-Bolibar"],["Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Araba/√Ålava","Balears, Illes","Gipuzkoa","Gipuzkoa","Gipuzkoa","Gipuzkoa","Gipuzkoa","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Navarra","Bizkaia","Bizkaia","Bizkaia","Bizkaia","Bizkaia","Bizkaia","Bizkaia","Bizkaia","Bizkaia","Bizkaia","Bizkaia"],["Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Balears, Illes","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Navarra, Comunidad Foral de","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco","Pa√≠s Vasco"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NombreMuni<\/th>\n      <th>NombreProv<\/th>\n      <th>NombreCCAA<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"deferRender":true,"scrollY":400,"scroller":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true},"selection":{"mode":"multiple","selected":null,"target":"row"}},"evals":[],"jsHooks":[]}</script>
<p><br></p>
<p>Se acabo!!! Faltan los mapas, pero para otro d√≠a/post. Me est√°n entrando ganas de ver que provincia/CC.AA. espa√±ola tiene mas municipios con nombre compuesto; por lo que he ido viendo al hacer el post apostar√≠a por una de las dos Castillas, casi por Castilla-La Mancha, pero me resisto a la tentaci√≥n.</p>
<p><br></p>
<p><strong>PD:</strong> La verdad es que el <a href="https://suzanbaert.netlify.com/2017/12/bilingualtowns">post de Suzan Baert</a> estaba m√°s mejor. Hac√≠a unos mapas muy chulos y adem√°s intentaba buscar una explicaci√≥n, o agrupar los municipios con doble nombre. La explicaci√≥n m√°s obvia es que hay m√°s municipios de este tipo cerca de la frontera entre Flandes y Valonia, pero hay otras.</p>
<p>En mi caso, he evitado hacer comentarios/especulaciones sobre motivos por los que aparecen las dobles denominaciones. El nombre de los pueblos es algo importante para los lugare√±os: lo dice uno de Pancrudo, un pueblo de Teruel al que muchos denominan ‚ÄúPanduro‚Äù. Nos hace mucha gracia!!! üí• üòÑ.</p>
<p>Agur</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>A los 30 minutos de dar por cerrado el post ya he encontrado tres municipios que contienen <code>-</code> en su nombre porque es un nombre compuesto: dos en el Pa√≠s Vasco (<code>Gernika-Lumo</code> y <code>Bidania-Goiatz</code>) y uno en Navarra (<code>Tiebas-Muruarte de Reta</code>). Seguro que hay alguno m√°s!! , pero ya no lo corrijo, al menos por hoy. Tengo justificaciones varias: ‚ÄúLa perfecci√≥n es una pulida colecci√≥n de errores‚Äù (Mario Benedetti), o ‚ÄúLa perfecci√≥n se logra al fin, no cuando no hay nada que agregar, sino cuando ya no hay nada que obtener‚Äù (Antoine de Saint-Exup√©ry) o ‚ÄúProcurando lo mejor estropeamos a menudo lo que est√° bien‚Äù (William Shakespeare) o ‚Äúbuscando perfecci√≥n encontr√≥ dolor‚Äù (m√≠a, a medias, la original que me rondaba la cabeza es ‚Äúla vida es parte buscar placer y parte hallar dolor‚Äù de Nacho Vegas) y muchas m√°s que puedes encontrar en www.proverbia.net o similares. No he conseguido arreglar el formato de las tablas, y las datatables no salen!! üëé. Al final tendr√© que cambiar el theme.<a href="#fnref1">‚Ü©</a></p></li>
</ol>
</div>
